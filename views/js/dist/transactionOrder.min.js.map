{"version":3,"sources":["webpack://MollieModule.[name]/./src/back/transaction/components/orderlines/EmptyOrderLinesTable.tsx","webpack://MollieModule.[name]/./src/back/transaction/components/orderlines/OrderLinesEditor.tsx","webpack://MollieModule.[name]/./src/back/transaction/components/orderlines/OrderLinesInfo.tsx","webpack://MollieModule.[name]/./src/back/transaction/components/orderlines/OrderLinesTable.tsx","webpack://MollieModule.[name]/./src/back/transaction/components/orderlines/OrderLinesTableActions.tsx","webpack://MollieModule.[name]/./src/back/transaction/components/orderlines/OrderLinesTableFooter.tsx","webpack://MollieModule.[name]/./src/back/transaction/components/orderlines/OrderLinesTableHeader.tsx","webpack://MollieModule.[name]/./src/back/transaction/components/orderlines/OrderPanel.tsx","webpack://MollieModule.[name]/./src/back/transaction/components/orderlines/OrderPanelContent.tsx","webpack://MollieModule.[name]/./src/back/transaction/components/orderlines/PaymentInfo.tsx","webpack://MollieModule.[name]/./src/back/transaction/components/orderlines/PaymentInfoContent.tsx","webpack://MollieModule.[name]/./src/back/transaction/components/orderlines/ShipmentTrackingEditor.tsx"],"names":["EmptyOrderLinesTable","useCallback","useMappedState","state","translations","config","legacy","thereAreNoProducts","CloseIcon","styled","FontAwesomeIcon","QuantitySelect","select","QuantityOption","option","OrderLinesEditor","edited","lines","lineType","useState","stateLines","setStateLines","_updateQty","lineId","qty","newLines","compact","cloneDeep","filter","line","newLineIndex","findIndex","item","id","newQuantity","length","splice","forEach","newLine","quantity","useEffect","renderLines","remove","map","color","name","target","value","parseInt","range","faChevronDown","marginLeft","pointerEvents","display","faTimesCircle","Div","div","OrderLinesInfo","order","currencies","products","details","vouchers","refundWarning","replace","formatCurrency","parseFloat","availableRefundAmount","get","currency","TableContainer","OrderLinesTable","loading","setLoading","viewportWidth","dispatch","useDispatch","_ship","origLines","reviewWrapper","document","createElement","render","el","firstChild","swal","default","title","xss","reviewShipment","text","reviewShipmentProducts","buttons","cancel","visible","confirm","OK","closeOnClickOutside","content","input","tracking","carrier","code","url","checkSwalButton","elem","querySelector","disabled","isEmpty","updateTracking","newTracking","then","trackingWrapper","innerHTML","Promise","all","trackingDetails","addTrackingInfo","shipProducts","shipOrder","success","newOrder","updateOrder","updateWarning","icon","anErrorOccurred","unableToShip","console","error","_refund","refundOrder","unableToRefund","_cancel","cancelOrder","cx","marginBottom","status","quantityShipped","quantityCanceled","quantityRefunded","unitPrice","vatAmount","vatRate","totalAmount","OrderLinesTableActions","shipLine","cancelLine","refundLine","isRefundable","refundableQuantity","shipButton","cursor","shippableQuantity","type","width","textAlign","opacity","ship","undefined","WebkitFilter","faTruck","faCircleNotch","refundButton","refund","faUndo","cancelButton","cancelableQuantity","faTimes","buttonGroup","OrderLinesTableFooter","isCancelable","Object","values","isShippable","shipAll","faUndoAlt","refundAll","cancelAll","OrderLinesTableHeader","product","shipped","whiteSpace","canceled","refunded","OrderPanel","moduleDir","keys","marginTop","height","OrderPanelContent","PaymentInfo","paymentInfo","PaymentInfoContent","transactionInfo","transactionId","method","remainderMethod","date","moment","createdAt","format","amount","refundable","issuer","voucherInfo","voucher","ErrorMessage","p","show","FormGroup","Label","label","Input","InputContainer","ShipmentTrackingEditor","props","skipTracking","setSkipTracking","setCarrier","carrierChanged","setCarrierChanged","setCode","codeChanged","setCodeChanged","setUrl","_getCarrierInvalid","_getCodeInvalid","_updateSkipTracking","_updateCarrier","_updateCode","_updateUrl","checked","skipTrackingDetails","egFedex","thisInfoIsRequired","trackingCode","optional"],"mappings":"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","file":"transactionOrder.min.js","sourcesContent":["/**\r\n * Copyright (c) 2012-2020, Mollie B.V.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * - Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * - Redistributions in binary form must reproduce the above copyright\r\n *    notice, this list of conditions and the following disclaimer in the\r\n *    documentation and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND ANY\r\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\r\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT\r\n * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY\r\n * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH\r\n * DAMAGE.\r\n *\r\n * @author     Mollie B.V. <info@mollie.nl>\r\n * @copyright  Mollie B.V.\r\n * @license    Berkeley Software Distribution License (BSD-License 2) http://www.opensource.org/licenses/bsd-license.php\r\n * @category   Mollie\r\n * @package    Mollie\r\n * @link       https://www.mollie.nl\r\n */\r\nimport React, { ReactElement, useCallback } from 'react';\r\n\r\nimport OrderLinesTableHeader from '@transaction/components/orderlines/OrderLinesTableHeader';\r\nimport { IMollieOrderConfig, ITranslations } from '@shared/globals';\r\nimport { useMappedState } from 'redux-react-hook';\r\n\r\ninterface IProps {\r\n  // Redux\r\n  translations?: ITranslations;\r\n  config?: IMollieOrderConfig;\r\n}\r\n\r\nexport default function EmptyOrderLinesTable(): ReactElement<{}> {\r\n  const { translations, config: { legacy } }: IProps = useCallback(useMappedState((state: IMollieOrderState): any => ({\r\n    translations: state.translations,\r\n    config: state.config,\r\n  })), []);\r\n\r\n  if (legacy) {\r\n    return <div className=\"error\">{translations.thereAreNoProducts}</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"table-responsive\">\r\n      <table className=\"table\">\r\n        <OrderLinesTableHeader/>\r\n        <tbody>\r\n          <tr>\r\n            <td className=\"list-empty hidden-print\" colSpan={3}>\r\n              <div className=\"list-empty-msg\">\r\n                <i className=\"icon-warning-sign list-empty-icon\"/>\r\n                {translations.thereAreNoProducts}\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * Copyright (c) 2012-2020, Mollie B.V.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * - Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * - Redistributions in binary form must reproduce the above copyright\r\n *    notice, this list of conditions and the following disclaimer in the\r\n *    documentation and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND ANY\r\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\r\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT\r\n * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY\r\n * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH\r\n * DAMAGE.\r\n *\r\n * @author     Mollie B.V. <info@mollie.nl>\r\n * @copyright  Mollie B.V.\r\n * @license    Berkeley Software Distribution License (BSD-License 2) http://www.opensource.org/licenses/bsd-license.php\r\n * @category   Mollie\r\n * @package    Mollie\r\n * @link       https://www.mollie.nl\r\n */\r\nimport React, { ReactElement, useEffect, useState } from 'react';\r\nimport { Table, Tr } from 'styled-table-component';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faChevronDown, faTimesCircle } from '@fortawesome/free-solid-svg-icons'\r\nimport styled from 'styled-components';\r\nimport { cloneDeep, compact, filter, findIndex, forEach, range, remove } from 'lodash';\r\n\r\nimport { IMollieOrderLine, ITranslations } from '@shared/globals';\r\n\r\ninterface IProps {\r\n  lineType: 'shippable' | 'refundable' | 'cancelable';\r\n  translations: ITranslations;\r\n  lines: Array<IMollieOrderLine>;\r\n  edited: (newLines: Array<IMollieOrderLine>) => void;\r\n}\r\n\r\nconst CloseIcon = styled(FontAwesomeIcon)`\r\ncursor: pointer;\r\ncolor: #555;\r\n\r\n:hover {\r\n  opacity: 0.8;\r\n}\r\n:active {\r\n  opacity: 0.6;\r\n}\r\n` as any;\r\n\r\nconst QuantitySelect = styled.select`\r\n&&&& {\r\n  cursor: pointer!important;\r\n  appearance: none!important;\r\n  color: #555!important;\r\n  border: 0!important;\r\n  background-color: transparent!important;\r\n  display: inline-block!important;\r\n  height: auto!important;\r\n  padding: 0 25px 0 5px!important;\r\n  font-size: medium!important;\r\n}\r\n\r\n` as any;\r\n\r\nconst QuantityOption = styled.option`\r\nfont-size: medium!important;\r\ncolor: #555!important;\r\n` as any;\r\n\r\nexport default function OrderLinesEditor({ edited, lines, lineType }: IProps): ReactElement<{}> {\r\n  const [stateLines, setStateLines] = useState<Array<IMollieOrderLine>>(lines);\r\n\r\n  function _updateQty(lineId: string, qty: number): void {\r\n    let newLines = compact(cloneDeep(stateLines));\r\n    newLines = filter(newLines, line => line[`${lineType}Quantity`] > 0);\r\n\r\n    const newLineIndex = findIndex(newLines, item => item.id === lineId);\r\n    if (newLineIndex < 0) {\r\n      return;\r\n    }\r\n\r\n    if (qty > 0) {\r\n      newLines[newLineIndex].newQuantity = qty;\r\n    } else if (newLines.length > 1) {\r\n      newLines.splice(newLineIndex, 1);\r\n    }\r\n    setStateLines(cloneDeep(newLines));\r\n    forEach(newLines, (newLine) => {\r\n      if (typeof newLine.quantity === 'undefined') {\r\n        return;\r\n      }\r\n\r\n      newLine.quantity = newLine.newQuantity;\r\n      delete newLine.newQuantity;\r\n    });\r\n    edited(newLines);\r\n  }\r\n\r\n  useEffect(() => {\r\n    _updateQty(lines[0].id, lines[0][`${lineType}Quantity`]);\r\n  }, []);\r\n\r\n  const renderLines = cloneDeep(stateLines);\r\n  remove(renderLines, line => line[`${lineType}Quantity`] < 1);\r\n\r\n  return (\r\n    <Table bordered>\r\n      <tbody>\r\n        {stateLines.map((line) => (\r\n          <Tr key={line.id} light>\r\n            <td style={{ color: '#555' }}>{line.name}</td>\r\n            <td style={{ color: '#555' }}>\r\n              <QuantitySelect\r\n                value={line.newQuantity || line[`${lineType}Quantity`]}\r\n                onChange={({ target: { value: qty } }: any) => _updateQty(line.id, parseInt(qty, 10))}\r\n              >\r\n                {range(1, line[`${lineType}Quantity`] + 1).map((qty) => (\r\n                  <QuantityOption key={qty} value={qty}>{qty}x</QuantityOption>\r\n                ))}\r\n              </QuantitySelect>\r\n              <FontAwesomeIcon icon={faChevronDown} style={{ marginLeft: '-20px', pointerEvents: 'none' }}/>\r\n            </td>\r\n            <td style={{ display: stateLines.length > 1 ? 'auto' : 'none' }}>\r\n              <CloseIcon icon={faTimesCircle} onClick={() => _updateQty(line.id, 0)}/>\r\n            </td>\r\n          </Tr>\r\n        ))}\r\n      </tbody>\r\n    </Table>\r\n  )\r\n}\r\n","/**\r\n * Copyright (c) 2012-2020, Mollie B.V.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * - Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * - Redistributions in binary form must reproduce the above copyright\r\n *    notice, this list of conditions and the following disclaimer in the\r\n *    documentation and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND ANY\r\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\r\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT\r\n * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY\r\n * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH\r\n * DAMAGE.\r\n *\r\n * @author     Mollie B.V. <info@mollie.nl>\r\n * @copyright  Mollie B.V.\r\n * @license    Berkeley Software Distribution License (BSD-License 2) http://www.opensource.org/licenses/bsd-license.php\r\n * @category   Mollie\r\n * @package    Mollie\r\n * @link       https://www.mollie.nl\r\n */\r\nimport React, {ReactElement, useCallback, useState} from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport OrderLinesTable from '@transaction/components/orderlines/OrderLinesTable';\r\nimport EmptyOrderLinesTable from '@transaction/components/orderlines/EmptyOrderLinesTable';\r\nimport {ICurrencies, IMollieApiOrder, IMollieOrderConfig, ITranslations} from '@shared/globals';\r\nimport {useMappedState} from 'redux-react-hook';\r\nimport {formatCurrency} from \"@shared/tools\";\r\nimport {get} from \"lodash\";\r\n\r\ninterface IProps {\r\n    // Redux\r\n    translations?: ITranslations;\r\n    order?: IMollieApiOrder;\r\n    currencies?: ICurrencies;\r\n    config?: IMollieOrderConfig;\r\n}\r\n\r\nconst Div = styled.div`\r\n@media only screen and (min-width: 992px) {\r\n  margin-left: 5px!important;\r\n  margin-right: -5px!important;\r\n}\r\n` as any;\r\n\r\nexport default function OrderLinesInfo(): ReactElement<{}> {\r\n    const {translations, order, currencies, config: {legacy}}: IProps = useMappedState((state: IMollieOrderState): any => ({\r\n        translations: state.translations,\r\n        order: state.order,\r\n        currencies: state.currencies,\r\n        config: state.config,\r\n    }));\r\n\r\n    if (legacy) {\r\n        return (\r\n            <>\r\n                {legacy && <h3>{translations.products}</h3>}\r\n                {!legacy && <h4>{translations.products}</h4>}\r\n                {!order || (!order.lines.length && <EmptyOrderLinesTable/>)}\r\n                {!!order && !!order.lines.length && <OrderLinesTable/>}\r\n            </>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Div className=\"col-md-9 panel\">\r\n            <div className=\"panel-heading\">{translations.products}</div>\r\n            {/*todo: move to order warning component*/}\r\n            {order.details.vouchers &&\r\n            <>\r\n                <div className=\"alert alert-warning\" role=\"alert\">\r\n                    {translations.refundWarning.replace(\r\n                        '%1s',\r\n                        formatCurrency(parseFloat(order.availableRefundAmount.value), get(currencies, order.availableRefundAmount.currency)\r\n                        )\r\n                    )\r\n                    }\r\n                </div>\r\n            </>\r\n            }\r\n            {!order || (!order.lines.length && <EmptyOrderLinesTable/>)}\r\n            {!!order && !!order.lines.length && <OrderLinesTable/>}\r\n        </Div>\r\n    );\r\n}\r\n","/**\r\n * Copyright (c) 2012-2020, Mollie B.V.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * - Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * - Redistributions in binary form must reproduce the above copyright\r\n *    notice, this list of conditions and the following disclaimer in the\r\n *    documentation and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND ANY\r\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\r\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT\r\n * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY\r\n * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH\r\n * DAMAGE.\r\n *\r\n * @author     Mollie B.V. <info@mollie.nl>\r\n * @copyright  Mollie B.V.\r\n * @license    Berkeley Software Distribution License (BSD-License 2) http://www.opensource.org/licenses/bsd-license.php\r\n * @category   Mollie\r\n * @package    Mollie\r\n * @link       https://www.mollie.nl\r\n */\r\nimport React, { ReactElement, useCallback, useState } from 'react';\r\nimport { render } from 'react-dom';\r\nimport cx from 'classnames';\r\nimport xss from 'xss';\r\nimport { get, isEmpty } from 'lodash';\r\nimport styled from 'styled-components';\r\nimport { useDispatch, useMappedState } from 'redux-react-hook';\r\nimport { SweetAlert } from 'sweetalert/typings/core';\r\n\r\nimport OrderLinesTableHeader from '@transaction/components/orderlines/OrderLinesTableHeader';\r\nimport OrderLinesTableFooter from '@transaction/components/orderlines//OrderLinesTableFooter';\r\nimport OrderLinesEditor from '@transaction/components/orderlines//OrderLinesEditor';\r\nimport ShipmentTrackingEditor from '@transaction/components/orderlines//ShipmentTrackingEditor';\r\nimport { cancelOrder, refundOrder, shipOrder } from '@transaction/misc/ajax';\r\nimport {updateOrder, updateWarning} from '@transaction/store/actions';\r\nimport OrderLinesTableActions from '@transaction/components/orderlines//OrderLinesTableActions';\r\nimport { formatCurrency } from '@shared/tools';\r\nimport { IMollieApiOrder, IMollieOrderLine, IMollieTracking, } from '@shared/globals';\r\n\r\nconst TableContainer = styled.div`\r\n@media (min-width: 1280px) {\r\n  overflow: ${({ config: { legacy } }: Partial<IMollieOrderState>) => legacy ? 'inherit' : 'visible!important'};\r\n}\r\n` as any;\r\n\r\nexport default function OrderLinesTable(): ReactElement<{}> {\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const { translations, order, currencies, config: { legacy }, config, viewportWidth }: Partial<IMollieOrderState> = useMappedState((state: IMollieOrderState): any => ({\r\n    order: state.order,\r\n    currencies: state.currencies,\r\n    translations: state.translations,\r\n    config: state.config,\r\n    viewportWidth: state.viewportWidth,\r\n  }));\r\n  const dispatch = useDispatch();\r\n\r\n  async function _ship(origLines: Array<IMollieOrderLine>): Promise<void> {\r\n    let lines = null;\r\n\r\n    const reviewWrapper = document.createElement('DIV');\r\n    render(<OrderLinesEditor lineType=\"shippable\" translations={translations} lines={origLines} edited={newLines => lines = newLines}/>, reviewWrapper);\r\n    let el: any = reviewWrapper.firstChild;\r\n\r\n    const { default: swal } = await import(/* webpackPrefetch: true, webpackChunkName: \"sweetalert\" */ 'sweetalert') as never as { default: SweetAlert };\r\n    let input = await swal({\r\n      title: xss(translations.reviewShipment),\r\n      text: xss(translations.reviewShipmentProducts),\r\n      buttons: {\r\n        cancel: {\r\n          text: xss(translations.cancel),\r\n          visible: true,\r\n        },\r\n        confirm: {\r\n          text: xss(translations.OK),\r\n        }\r\n      },\r\n      closeOnClickOutside: false,\r\n      content: el,\r\n    });\r\n    if (input) {\r\n      let tracking: IMollieTracking = {\r\n        carrier: '',\r\n        code: '',\r\n        url: '',\r\n      };\r\n      const checkSwalButton = async (): Promise<void> => {\r\n        const elem: HTMLInputElement = document.querySelector('.swal-button.swal-button--confirm');\r\n\r\n        elem.disabled = tracking && (isEmpty(tracking.code.replace(/\\s+/, '')) || isEmpty(tracking.carrier.replace(/\\s+/, '')));\r\n      };\r\n\r\n      const updateTracking = (newTracking: IMollieTracking): void => {\r\n        tracking = newTracking;\r\n        checkSwalButton().then();\r\n      };\r\n\r\n      let trackingWrapper = document.createElement('DIV');\r\n      trackingWrapper.innerHTML = '';\r\n      render(<ShipmentTrackingEditor checkButtons={checkSwalButton} config={config} translations={translations} edited={newTracking => updateTracking(newTracking)}/>, trackingWrapper);\r\n      el = trackingWrapper.firstChild;\r\n      [input] = await Promise.all([swal({\r\n        title: xss(translations.trackingDetails),\r\n        text: xss(translations.addTrackingInfo),\r\n        buttons: {\r\n          cancel: {\r\n            text: xss(translations.cancel),\r\n            visible: true,\r\n          },\r\n          confirm: {\r\n            text: xss(translations.shipProducts),\r\n          },\r\n        },\r\n        closeOnClickOutside: false,\r\n        content: el,\r\n      }), checkSwalButton()]);\r\n      if (input) {\r\n        try {\r\n          setLoading(true);\r\n          const { success, order: newOrder } = await shipOrder(order.id, lines, tracking);\r\n          if (success) {\r\n            dispatch(updateOrder(newOrder));\r\n            dispatch(updateWarning('shipped'));\r\n          } else {\r\n            import(/* webpackPrefetch: true, webpackChunkName: \"sweetalert\" */ 'sweetalert').then(({ default: swal }) => {\r\n              swal({\r\n                icon: 'error',\r\n                title: xss(translations.anErrorOccurred),\r\n                text: xss(translations.unableToShip),\r\n              }).then();\r\n            });\r\n          }\r\n        } catch (e) {\r\n          if (typeof e === 'string') {\r\n            import(/* webpackPrefetch: true, webpackChunkName: \"sweetalert\" */ 'sweetalert').then(({ default: swal }) => {\r\n              swal({\r\n                icon: 'error',\r\n                title: xss(translations.anErrorOccurred),\r\n                text: xss(e),\r\n              }).then();\r\n            });\r\n          }\r\n          console.error(e);\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  async function _refund(origLines: Array<IMollieOrderLine>): Promise<void> {\r\n    let lines = null;\r\n    const reviewWrapper = document.createElement('DIV');\r\n    render(<OrderLinesEditor lineType=\"refundable\" translations={translations} lines={origLines} edited={newLines => lines = newLines}/>, reviewWrapper);\r\n    let el: any = reviewWrapper.firstChild;\r\n    const { default: swal }= await import(/* webpackPrefetch: true, webpackChunkName: \"sweetalert\" */ 'sweetalert') as never as { default: SweetAlert };\r\n    let input = await swal({\r\n      title: xss(translations.reviewShipment),\r\n      text: xss(translations.reviewShipmentProducts),\r\n      buttons: {\r\n        cancel: {\r\n          text: xss(translations.cancel),\r\n          visible: true,\r\n        },\r\n        confirm: {\r\n          text: xss(translations.OK),\r\n        },\r\n      },\r\n      closeOnClickOutside: false,\r\n      content: el,\r\n    });\r\n    if (input) {\r\n      try {\r\n        setLoading(true);\r\n        const { success, order: newOrder } = await refundOrder(order, lines);\r\n        if (success) {\r\n          dispatch(updateWarning('refunded'));\r\n          dispatch(updateOrder(newOrder));\r\n        } else {\r\n          import(/* webpackPrefetch: true, webpackChunkName: \"sweetalert\" */ 'sweetalert').then(({ default: swal }) => {\r\n            swal({\r\n              icon: 'error',\r\n              title: xss(translations.anErrorOccurred),\r\n              text: xss(translations.unableToRefund),\r\n            }).then();\r\n          });\r\n        }\r\n      } catch (e) {\r\n        if (typeof e === 'string') {\r\n          import(/* webpackPrefetch: true, webpackChunkName: \"sweetalert\" */ 'sweetalert').then(({ default: swal }) => {\r\n            swal({\r\n              icon: 'error',\r\n              title: xss(translations.anErrorOccurred),\r\n              text: xss(e),\r\n            }).then();\r\n          });\r\n        }\r\n        console.error(e);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  }\r\n\r\n  async function _cancel(origLines: Array<IMollieOrderLine>): Promise<void> {\r\n    let lines = null;\r\n    const reviewWrapper = document.createElement('DIV');\r\n    render(<OrderLinesEditor lineType=\"cancelable\" translations={translations} lines={origLines} edited={newLines => lines = newLines}/>, reviewWrapper);\r\n    let el: any = reviewWrapper.firstChild;\r\n\r\n    const { default: swal } = await import(/* webpackPrefetch: true, webpackChunkName: \"sweetalert\" */ 'sweetalert') as never as { default: SweetAlert };\r\n    let input = await swal({\r\n      title: xss(translations.reviewShipment),\r\n      text: xss(translations.reviewShipmentProducts),\r\n      buttons: {\r\n        cancel: {\r\n          text: xss(translations.cancel),\r\n          visible: true,\r\n        },\r\n        confirm: {\r\n          text: xss(translations.OK),\r\n        },\r\n      },\r\n      closeOnClickOutside: false,\r\n      content: el,\r\n    });\r\n    if (input) {\r\n      try {\r\n        setLoading(true);\r\n        const { success, order: newOrder } = await cancelOrder(order.id, lines);\r\n        if (success) {\r\n          dispatch(updateOrder(newOrder));\r\n          dispatch(updateWarning('canceled'));\r\n        } else {\r\n          swal({\r\n            icon: 'error',\r\n            title: xss(translations.anErrorOccurred),\r\n            text: xss(translations.unableToShip),\r\n          }).then();\r\n        }\r\n      } catch (e) {\r\n        if (typeof e === 'string') {\r\n          swal({\r\n            icon: 'error',\r\n            title: xss(translations.anErrorOccurred),\r\n            text: xss(e),\r\n          }).then();\r\n        }\r\n        console.error(e);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <TableContainer\r\n      className={cx({\r\n        'table-responsive': !legacy,\r\n      })}\r\n      order={order}\r\n      currencies={currencies}\r\n      translations={translations}\r\n      config={config}\r\n      viewportWidth={viewportWidth}\r\n    >\r\n      <table className={cx({\r\n        'table': true,\r\n      })}>\r\n        <OrderLinesTableHeader/>\r\n        <tbody>\r\n          {order.lines.map((line: IMollieOrderLine) => (\r\n            <tr key={line.id} style={{ marginBottom: '100px' }}>\r\n              <td><strong>{line.quantity}x</strong> {line.name}</td>\r\n              <td>{line.status}</td>\r\n              {viewportWidth < 1390 && <td>{line.quantityShipped} / {line.quantityCanceled} / {line.quantityRefunded}</td>}\r\n              {viewportWidth >= 1390 && <td>{line.quantityShipped}</td>}\r\n              {viewportWidth >= 1390 && <td>{line.quantityCanceled}</td>}\r\n              {viewportWidth >= 1390 && <td>{line.quantityRefunded}</td>}\r\n              <td>{formatCurrency(parseFloat(line.unitPrice.value), get(currencies, line.unitPrice.currency))}</td>\r\n              <td>{formatCurrency(parseFloat(line.vatAmount.value), get(currencies, line.vatAmount.currency))} ({line.vatRate}%)</td>\r\n              <td>{formatCurrency(parseFloat(line.totalAmount.value), get(currencies, line.totalAmount.currency))}</td>\r\n              <td className={cx({\r\n                'actions': !legacy,\r\n              })}>\r\n                <OrderLinesTableActions\r\n                  loading={loading}\r\n                  line={line}\r\n                  availableRefundAmount={order.availableRefundAmount}\r\n                  refundLine={_refund}\r\n                  shipLine={_ship}\r\n                  cancelLine={_cancel}\r\n                />\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n        <OrderLinesTableFooter loading={loading} ship={_ship} refund={_refund} cancel={_cancel}/>\r\n      </table>\r\n    </TableContainer>\r\n  );\r\n}\r\n","import React, {ReactElement, useCallback} from 'react';\r\nimport cx from 'classnames';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport {faCircleNotch, faTimes, faTruck, faUndo} from '@fortawesome/free-solid-svg-icons';\r\nimport {useMappedState} from 'redux-react-hook';\r\n\r\nimport { IMollieAmount, IMollieOrderLine } from '@shared/globals';\r\n\r\ninterface IProps {\r\n    line: IMollieOrderLine;\r\n    loading: boolean;\r\n    shipLine: Function;\r\n    cancelLine: Function;\r\n    refundLine: Function;\r\n    availableRefundAmount: IMollieAmount;\r\n}\r\n\r\nexport default function OrderLinesTableActions({line, loading, shipLine, cancelLine, refundLine, availableRefundAmount }: IProps): ReactElement<{}> {\r\n    const {config: {legacy}, translations }: Partial<IMollieOrderState> = useCallback(useMappedState((state: IMollieOrderState): any => ({\r\n        translations: state.translations,\r\n        config: state.config\r\n    })), []);\r\n\r\n    const isRefundable = (): boolean => line.refundableQuantity >= 1 && parseFloat(availableRefundAmount.value) > 0.0\r\n\r\n    let shipButton = (\r\n        <button\r\n            style={{\r\n                cursor: (loading || line.shippableQuantity < 1 || line.type === 'discount') ? 'not-allowed' : 'pointer',\r\n                width: legacy ? '100px' : 'auto',\r\n                textAlign: legacy ? 'left' : 'inherit',\r\n                opacity: ((loading || !isRefundable()) && legacy) ? 0.8 : 1,\r\n            }}\r\n            className={cx({'btn': !legacy, 'btn-default': !legacy})}\r\n            title=\"\"\r\n            disabled={loading || line.shippableQuantity < 1 || line.type === 'discount'}\r\n            onClick={() => shipLine([line])}\r\n        >\r\n            {legacy && <img\r\n                src=\"../img/admin/delivery.gif\"\r\n                alt={translations.ship}\r\n                style={{\r\n                    filter: (loading || line.shippableQuantity < 1) ? 'grayscale(100%)' : undefined,\r\n                    WebkitFilter: (loading || line.shippableQuantity < 1) ? 'grayscale(100%)' : undefined,\r\n                }}\r\n            />}\r\n            {!legacy && <FontAwesomeIcon icon={!loading ? faTruck : faCircleNotch} spin={loading}/>} {translations.ship}\r\n        </button>\r\n    );\r\n\r\n    const refundButton = legacy ? (\r\n        <button\r\n            style={{\r\n                cursor: (loading || !isRefundable() || line.type) === 'discount' ? 'not-allowed' : 'pointer',\r\n                width: '100px',\r\n                textAlign: 'left',\r\n                opacity: (loading || !isRefundable() || line.type === 'discount') ? 0.8 : 1,\r\n            }}\r\n            title=\"\"\r\n            disabled={loading || !isRefundable() || line.type === 'discount'}\r\n            onClick={() => refundLine([line])}\r\n        >\r\n            <img\r\n                src=\"../img/admin/money.gif\"\r\n                alt={translations.refund}\r\n                style={{\r\n                    filter: (loading || !isRefundable() || line.type === 'discount') ? 'grayscale(100%)' : undefined,\r\n                    WebkitFilter: (loading || !isRefundable() || line.type === 'discount') ? 'grayscale(100%)' : undefined,\r\n                }}\r\n            /> {translations.refund}\r\n        </button>\r\n    ) : (\r\n        <a\r\n            style={{\r\n                cursor: (loading || !isRefundable() || line.type === 'discount') ? 'not-allowed' : 'pointer',\r\n                opacity: (loading || !isRefundable() || line.type === 'discount') ? 0.8 : 1,\r\n            }}\r\n            onClick={() => isRefundable() && refundLine([line])}\r\n            role=\"button\"\r\n        >\r\n            <FontAwesomeIcon icon={!loading ? faUndo : faCircleNotch} spin={loading}/> {translations.refund}\r\n        </a>\r\n    );\r\n\r\n    const cancelButton = legacy ? (\r\n        <button\r\n            style={{\r\n                cursor: line.cancelableQuantity < 1 ? 'not-allowed' : 'pointer',\r\n                width: '100px',\r\n                textAlign: 'left',\r\n                opacity: (loading || !isRefundable() || line.type === 'discount') ? 0.8 : 1,\r\n            }}\r\n            title=\"\"\r\n            disabled={loading || line.cancelableQuantity < 1 || line.type === 'discount'}\r\n            onClick={() => cancelLine([line])}\r\n        >\r\n            <img\r\n                src=\"../img/admin/disabled.gif\"\r\n                alt={translations.cancel}\r\n                style={{\r\n                    filter: (loading || line.cancelableQuantity < 1 || line.type === 'discount') ? 'grayscale(100%)' : undefined,\r\n                    WebkitFilter: (loading || line.cancelableQuantity < 1 || line.type === 'discount') ? 'grayscale(100%)' : undefined,\r\n                }}\r\n            /> {translations.cancel}\r\n        </button>\r\n    ) : (\r\n        <a\r\n            style={{\r\n                cursor: (loading || line.cancelableQuantity < 1 || line.type === 'discount') ? 'not-allowed' : 'pointer',\r\n                opacity: (loading || line.cancelableQuantity < 1 || line.type === 'discount') ? 0.8 : 1,\r\n            }}\r\n            onClick={() => isRefundable() && cancelLine([line])}\r\n            role=\"button\"\r\n        >\r\n            <FontAwesomeIcon icon={!loading ? faTimes : faCircleNotch} spin={loading}/> {translations.cancel}\r\n        </a>\r\n    );\r\n\r\n    const buttonGroup = legacy ? (\r\n        <div>\r\n            {shipButton}<br/>\r\n            {refundButton}<br/>\r\n            {cancelButton}\r\n        </div>\r\n    ) : (\r\n        <div className={cx({\r\n            'btn-group': !legacy,\r\n        })}\r\n        >\r\n            {shipButton}\r\n            <button\r\n                type=\"button\"\r\n                className={cx({\r\n                    'btn': !legacy,\r\n                    'btn-default': !legacy,\r\n                    'dropdown-toggle': !legacy,\r\n                })}\r\n                data-toggle={legacy ? null : 'dropdown'}\r\n                disabled={loading || (!isRefundable() && line.cancelableQuantity < 1) || line.type === 'discount'}\r\n            >\r\n                <span className=\"caret\">&nbsp;</span>\r\n            </button>\r\n            <ul className=\"dropdown-menu\">\r\n                <li>\r\n                    {refundButton}\r\n                </li>\r\n                <li>\r\n                    {cancelButton}\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div className={cx({'btn-group-action': !legacy})}>\r\n            {buttonGroup}\r\n        </div>\r\n    );\r\n}\r\n","/**\r\n * Copyright (c) 2012-2020, Mollie B.V.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * - Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * - Redistributions in binary form must reproduce the above copyright\r\n *    notice, this list of conditions and the following disclaimer in the\r\n *    documentation and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND ANY\r\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\r\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT\r\n * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY\r\n * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH\r\n * DAMAGE.\r\n *\r\n * @author     Mollie B.V. <info@mollie.nl>\r\n * @copyright  Mollie B.V.\r\n * @license    Berkeley Software Distribution License (BSD-License 2) http://www.opensource.org/licenses/bsd-license.php\r\n * @category   Mollie\r\n * @package    Mollie\r\n * @link       https://www.mollie.nl\r\n */\r\nimport React, { ReactElement, useCallback } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faCircleNotch, faTimes, faTruck, faUndoAlt } from '@fortawesome/free-solid-svg-icons';\r\nimport { compact, get } from 'lodash';\r\n\r\nimport { IMollieApiOrder, IMollieOrderConfig, ITranslations } from '@shared/globals';\r\nimport { useMappedState } from 'redux-react-hook';\r\nimport { formatCurrency } from \"@shared/tools\";\r\n\r\ninterface IProps {\r\n  loading: boolean;\r\n  ship: Function;\r\n  refund: Function;\r\n  cancel: Function;\r\n\r\n  // Redux\r\n  order?: IMollieApiOrder;\r\n  translations?: ITranslations;\r\n  config?: IMollieOrderConfig;\r\n}\r\n\r\nexport default function OrderLinesTableFooter({ loading, ship, cancel, refund }: IProps): ReactElement<{}> {\r\n  const { translations, order, currencies, config: { legacy } }: Partial<IMollieOrderState> = useMappedState((state: IMollieOrderState): any => ({\r\n    translations: state.translations,\r\n    currencies: state.currencies,\r\n    order: state.order,\r\n    config: state.config,\r\n  }));\r\n\r\n  function isCancelable(): boolean {\r\n    for (let line of Object.values(order.lines.filter(line => line.type !== 'discount'))) {\r\n      if (line.cancelableQuantity >= 1) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  function isShippable(): boolean {\r\n    for (let line of Object.values(order.lines.filter(line => line.type !== 'discount'))) {\r\n      if (line.shippableQuantity >= 1) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  function isRefundable(): boolean {\r\n    for (let line of Object.values(order.lines.filter(line => line.type !== 'discount'))) {\r\n      if (line.refundableQuantity >= 1 && parseFloat(order.availableRefundAmount.value) > 0.0) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  return (\r\n      <tfoot>\r\n      <tr>\r\n        <td colSpan={10}>\r\n          <div className=\"btn-group\" role=\"group\">\r\n            <button\r\n                type=\"button\"\r\n                onClick={() => ship(compact(order.lines.filter(line => line.type !== 'discount')))}\r\n                className=\"btn btn-primary\"\r\n                disabled={loading || !isShippable()}\r\n                style={{\r\n                  cursor: (loading || !isShippable()) ? 'not-allowed' : 'pointer',\r\n                  opacity: (loading || !isShippable()) ? 0.8 : 1\r\n                }}\r\n            >\r\n              {legacy && (\r\n                  <img\r\n                      src=\"../img/admin/delivery.gif\"\r\n                      alt=\"\"\r\n                      style={{\r\n                        filter: (loading || !isShippable()) ? 'grayscale(100%)' : null,\r\n                        WebkitFilter: (loading || !isShippable()) ? 'grayscale(100%)' : null,\r\n                      }}\r\n                  />\r\n              )}\r\n              {!legacy && <FontAwesomeIcon icon={loading ? faCircleNotch : faTruck} spin={loading}/>} {translations.shipAll}\r\n            </button>\r\n            <button\r\n                type=\"button\"\r\n                onClick={() => refund(compact(order.lines.filter(line => line.type !== 'discount')))}\r\n                className=\"btn btn-default\"\r\n                disabled={loading || !isRefundable()}\r\n                style={{\r\n                  cursor: (loading || !isRefundable()) ? 'not-allowed' : 'pointer',\r\n                  opacity: (loading || !isRefundable()) ? 0.8 : 1\r\n                }}\r\n            >\r\n              {legacy && (\r\n                  <img\r\n                      src=\"../img/admin/money.gif\"\r\n                      alt=\"\"\r\n                      style={{\r\n                        filter: (loading || !isRefundable()) ? 'grayscale(100%)' : null,\r\n                        WebkitFilter: (loading || !isRefundable()) ? 'grayscale(100%)' : null,\r\n                      }}\r\n                  />\r\n              )}\r\n              {!legacy && <FontAwesomeIcon icon={loading ? faCircleNotch : faUndoAlt} spin={loading}/>} {translations.refundAll}\r\n            </button>\r\n            <button\r\n                type=\"button\"\r\n                onClick={() => cancel(compact(order.lines.filter(line => line.type !== 'discount')))}\r\n                className=\"btn btn-default\"\r\n                disabled={loading || !isCancelable()}\r\n                style={{\r\n                  cursor: (loading || !isCancelable()) ? 'not-allowed' : 'pointer',\r\n                  opacity: (loading || !isCancelable()) ? 0.8 : 1\r\n                }}\r\n            >\r\n              {legacy && (\r\n                  <img\r\n                      src=\"../img/admin/disabled.gif\"\r\n                      alt=\"\"\r\n                      style={{\r\n                        filter: (loading || !isCancelable()) ? 'grayscale(100%)' : null,\r\n                        WebkitFilter: (loading || !isCancelable()) ? 'grayscale(100%)' : null,\r\n                      }}\r\n                  />\r\n              )}\r\n              {!legacy && <FontAwesomeIcon icon={loading ? faCircleNotch : faTimes} spin={loading}/>} {translations.cancelAll}\r\n            </button>\r\n          </div>\r\n        </td>\r\n      </tr>\r\n      </tfoot>\r\n  );\r\n}\r\n","/**\r\n * Copyright (c) 2012-2020, Mollie B.V.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * - Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * - Redistributions in binary form must reproduce the above copyright\r\n *    notice, this list of conditions and the following disclaimer in the\r\n *    documentation and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND ANY\r\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\r\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT\r\n * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY\r\n * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH\r\n * DAMAGE.\r\n *\r\n * @author     Mollie B.V. <info@mollie.nl>\r\n * @copyright  Mollie B.V.\r\n * @license    Berkeley Software Distribution License (BSD-License 2) http://www.opensource.org/licenses/bsd-license.php\r\n * @category   Mollie\r\n * @package    Mollie\r\n * @link       https://www.mollie.nl\r\n */\r\nimport React, { ReactElement, useCallback } from 'react';\r\n\r\nimport { ITranslations } from '@shared/globals';\r\nimport { useMappedState } from 'redux-react-hook';\r\n\r\ninterface IProps {\r\n  // Redux\r\n  translations?: ITranslations;\r\n  viewportWidth?: number;\r\n}\r\n\r\nexport default function OrderLinesTableHeader(): ReactElement<{}> {\r\n  const { translations, viewportWidth }: Partial<IMollieOrderState> = useCallback(useMappedState((state: IMollieOrderState): any => ({\r\n    translations: state.translations,\r\n    viewportWidth: state.viewportWidth,\r\n  })), []);\r\n\r\n  return (\r\n    <thead>\r\n      <tr>\r\n        <th>\r\n          <span className=\"title_box\"><strong>{translations.product}</strong></span>\r\n        </th>\r\n        <th>\r\n          <span className=\"title_box\">{translations.status}</span>\r\n        </th>\r\n        {viewportWidth < 1390 && (\r\n          <th>\r\n            <span className=\"title_box\">\r\n              <span>{translations.shipped}</span>\r\n              <br/> <span style={{ whiteSpace: 'nowrap' }}>/ {translations.canceled}</span>\r\n              <br/> <span style={{ whiteSpace: 'nowrap' }}>/ {translations.refunded}</span>\r\n            </span>\r\n          </th>\r\n        )}\r\n        {viewportWidth >= 1390 && (\r\n          <>\r\n            <th>\r\n              <span className=\"title_box\">{translations.shipped}</span>\r\n            </th>\r\n            <th>\r\n              <span className=\"title_box\">{translations.canceled}</span>\r\n            </th>\r\n            <th>\r\n              <span className=\"title_box\">{translations.refunded}</span>\r\n            </th>\r\n          </>\r\n        )}\r\n        <th>\r\n          <span className=\"title_box\">{translations.unitPrice}</span>\r\n        </th>\r\n        <th>\r\n          <span className=\"title_box\">{translations.vatAmount}</span>\r\n        </th>\r\n        <th>\r\n          <span className=\"title_box\">{translations.totalAmount}</span>\r\n        </th>\r\n        <th/>\r\n      </tr>\r\n    </thead>\r\n  );\r\n}\r\n","/**\r\n * Copyright (c) 2012-2020, Mollie B.V.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * - Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * - Redistributions in binary form must reproduce the above copyright\r\n *    notice, this list of conditions and the following disclaimer in the\r\n *    documentation and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND ANY\r\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\r\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT\r\n * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY\r\n * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH\r\n * DAMAGE.\r\n *\r\n * @author     Mollie B.V. <info@mollie.nl>\r\n * @copyright  Mollie B.V.\r\n * @license    Berkeley Software Distribution License (BSD-License 2) http://www.opensource.org/licenses/bsd-license.php\r\n * @category   Mollie\r\n * @package    Mollie\r\n * @link       https://www.mollie.nl\r\n */\r\nimport React, {ReactElement, useCallback} from 'react';\r\nimport {useMappedState} from 'redux-react-hook';\r\n\r\nimport OrderPanelContent from '@transaction/components/orderlines/OrderPanelContent';\r\nimport WarningContent from '@transaction/components/orderlines/WarningContent';\r\n\r\nexport default function OrderPanel(): ReactElement<{}> {\r\n    const {config: {legacy, moduleDir}, config} = useCallback(useMappedState((state: IMollieOrderState): any => ({\r\n        translations: state.translations,\r\n        config: state.config,\r\n        order: state.order,\r\n    })), []);\r\n\r\n    if (Object.keys(config).length <= 0) {\r\n        return null;\r\n    }\r\n\r\n    if (legacy) {\r\n        return (\r\n            <fieldset style={{marginTop: '14px'}}>\r\n                <legend>\r\n                    <img\r\n                        src={`${moduleDir}views/img/logo_small.png`}\r\n                        width=\"32\"\r\n                        height=\"32\"\r\n                        alt=\"Mollie logo\"\r\n                        style={{height: '16px', width: '16px', opacity: 0.8}}\r\n                    />\r\n                    &nbsp;<span>Mollie</span>&nbsp;\r\n                </legend>\r\n                <WarningContent/>\r\n                <OrderPanelContent/>\r\n            </fieldset>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"panel\">\r\n            <div className=\"panel-heading\">\r\n                <img\r\n                    src={`${moduleDir}views/img/mollie_panel_icon.png`}\r\n                    width=\"32\"\r\n                    height=\"32\"\r\n                    alt=\"Mollie logo\"\r\n                    style={{height: '16px', width: '16px', opacity: 0.8}}\r\n                />\r\n                &nbsp;<span>Mollie</span>&nbsp;\r\n            </div>\r\n            <WarningContent/>\r\n            <OrderPanelContent/>\r\n        </div>\r\n    );\r\n}\r\n","/**\r\n * Copyright (c) 2012-2020, Mollie B.V.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * - Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * - Redistributions in binary form must reproduce the above copyright\r\n *    notice, this list of conditions and the following disclaimer in the\r\n *    documentation and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND ANY\r\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\r\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT\r\n * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY\r\n * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH\r\n * DAMAGE.\r\n *\r\n * @author     Mollie B.V. <info@mollie.nl>\r\n * @copyright  Mollie B.V.\r\n * @license    Berkeley Software Distribution License (BSD-License 2) http://www.opensource.org/licenses/bsd-license.php\r\n * @category   Mollie\r\n * @package    Mollie\r\n * @link       https://www.mollie.nl\r\n */\r\nimport React, { ReactElement, useCallback } from 'react';\r\nimport cx from 'classnames';\r\n\r\nimport PaymentInfo from '@transaction/components/orderlines/PaymentInfo';\r\nimport OrderLinesInfo from '@transaction/components/orderlines/OrderLinesInfo';\r\nimport LoadingDots from '@shared/components/LoadingDots';\r\nimport { useMappedState } from 'redux-react-hook';\r\n\r\nexport default function OrderPanelContent(): ReactElement<{}> {\r\n  const { order, config: { legacy } }: Partial<IMollieOrderState> = useCallback(useMappedState( (state: IMollieOrderState): any => ({\r\n    order: state.order,\r\n    config: state.config,\r\n  })), []);\r\n\r\n  return (\r\n    <>\r\n      {!order && <LoadingDots/>}\r\n      {!!order && order.status && (\r\n        <div className={\r\n          cx({\r\n            'panel-body': !legacy,\r\n            'row': !legacy,\r\n          })}\r\n        >\r\n          <PaymentInfo/>\r\n          <OrderLinesInfo/>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","/**\r\n * Copyright (c) 2012-2020, Mollie B.V.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * - Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * - Redistributions in binary form must reproduce the above copyright\r\n *    notice, this list of conditions and the following disclaimer in the\r\n *    documentation and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND ANY\r\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\r\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT\r\n * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY\r\n * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH\r\n * DAMAGE.\r\n *\r\n * @author     Mollie B.V. <info@mollie.nl>\r\n * @copyright  Mollie B.V.\r\n * @license    Berkeley Software Distribution License (BSD-License 2) http://www.opensource.org/licenses/bsd-license.php\r\n * @category   Mollie\r\n * @package    Mollie\r\n * @link       https://www.mollie.nl\r\n */\r\nimport React, { ReactElement, useCallback } from 'react';\r\nimport styled from 'styled-components';\r\nimport { useMappedState } from 'redux-react-hook';\r\n\r\nimport PaymentInfoContent from '@transaction/components/orderlines/PaymentInfoContent';\r\n\r\nconst Div = styled.div`\r\n@media only screen and (min-width: 992px) {\r\n  margin-left: -5px!important;\r\n  margin-right: 5px!important;\r\n}\r\n` as any;\r\n\r\nexport default function PaymentInfo(): ReactElement<{}> {\r\n  const { translations, config: { legacy } }: Partial<IMollieOrderState> = useMappedState((state: IMollieOrderState): any => ({\r\n    translations: state.translations,\r\n    order: state.order,\r\n    currencies: state.currencies,\r\n    config: state.config,\r\n  }));\r\n\r\n  if (legacy) {\r\n    return (\r\n      <PaymentInfoContent/>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Div className=\"col-md-3 panel\">\r\n      <div className=\"panel-heading\">{translations.paymentInfo}</div>\r\n      <PaymentInfoContent/>\r\n    </Div>\r\n  );\r\n}\r\n","/**\r\n * Copyright (c) 2012-2020, Mollie B.V.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * - Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * - Redistributions in binary form must reproduce the above copyright\r\n *    notice, this list of conditions and the following disclaimer in the\r\n *    documentation and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND ANY\r\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\r\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT\r\n * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY\r\n * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH\r\n * DAMAGE.\r\n *\r\n * @author     Mollie B.V. <info@mollie.nl>\r\n * @copyright  Mollie B.V.\r\n * @license    Berkeley Software Distribution License (BSD-License 2) http://www.opensource.org/licenses/bsd-license.php\r\n * @category   Mollie\r\n * @package    Mollie\r\n * @link       https://www.mollie.nl\r\n */\r\nimport React, {ReactElement, useCallback} from 'react';\r\nimport moment from 'moment';\r\nimport {get} from 'lodash';\r\n\r\nimport {formatCurrency} from '@shared/tools';\r\nimport {useMappedState} from 'redux-react-hook';\r\n\r\nexport default function PaymentInfoContent(): ReactElement<{}> {\r\n    const {translations, order, currencies, config: {legacy}}: Partial<IMollieOrderState> = useMappedState((state: IMollieOrderState): any => ({\r\n        order: state.order,\r\n        currencies: state.currencies,\r\n        translations: state.translations,\r\n        config: state.config,\r\n    }));\r\n\r\n    return (\r\n        <>\r\n            {legacy && <h3>{translations.transactionInfo}</h3>}\r\n            {!legacy && <h4>{translations.transactionInfo}</h4>}\r\n            <strong>{translations.transactionId}</strong>: <span>{order.id}</span><br/>\r\n            <strong>{translations.method}</strong>: <span>{order.details.remainderMethod ? order.details.remainderMethod : order.method}</span><br/>\r\n            <strong>{translations.date}</strong>: <span>{moment(order.createdAt).format('YYYY-MM-DD HH:mm:ss')}</span><br/>\r\n            <strong>{translations.amount}</strong>: <span>{formatCurrency(parseFloat(order.amount.value), get(currencies, order.amount.currency))}</span><br/>\r\n            <strong>{translations.refundable}</strong>: <span>{formatCurrency(parseFloat(order.availableRefundAmount.value), get(currencies, order.availableRefundAmount.currency))}</span><br/>\r\n            {(order.details.remainderMethod || order.details.issuer) &&\r\n            <>\r\n                <br/>\r\n                <h4>{translations.voucherInfo}</h4>\r\n            </>\r\n            }\r\n            {order.details.issuer &&\r\n            <>\r\n                <span><strong>{translations.issuer}</strong>: <span>{order.details.issuer}</span><br/></span>\r\n            </>\r\n            }\r\n\r\n            {order.details.vouchers &&\r\n            order.details.vouchers.map(voucher =>\r\n                <>\r\n                    <span><strong>{translations.amount}</strong>: <span>{formatCurrency(parseFloat(voucher.amount.value), get(currencies, voucher.amount.currency))}</span><br/></span>\r\n                </>\r\n            )\r\n            }\r\n        </>\r\n    );\r\n}\r\n","/**\r\n * Copyright (c) 2012-2020, Mollie B.V.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * - Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * - Redistributions in binary form must reproduce the above copyright\r\n *    notice, this list of conditions and the following disclaimer in the\r\n *    documentation and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND ANY\r\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\r\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT\r\n * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY\r\n * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH\r\n * DAMAGE.\r\n *\r\n * @author     Mollie B.V. <info@mollie.nl>\r\n * @copyright  Mollie B.V.\r\n * @license    Berkeley Software Distribution License (BSD-License 2) http://www.opensource.org/licenses/bsd-license.php\r\n * @category   Mollie\r\n * @package    Mollie\r\n * @link       https://www.mollie.nl\r\n */\r\nimport React, { ReactElement, useEffect, useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport { get, isEmpty } from 'lodash';\r\n\r\nimport { IMollieOrderConfig, IMollieTracking, ITranslations } from '@shared/globals';\r\nimport {useMappedState} from \"redux-react-hook\";\r\n\r\ninterface IProps {\r\n  edited: (newLines: IMollieTracking) => void;\r\n  translations: ITranslations;\r\n  config: IMollieOrderConfig;\r\n  checkButtons: () => Promise<void> | void;\r\n}\r\n\r\n\r\nconst ErrorMessage = styled.p`\r\nmargin-top: 2px;\r\nvisibility: ${({ show }: any) => show ? 'auto' : 'hidden'};\r\ncolor: #f00;\r\n` as any;\r\n\r\nconst FormGroup = styled.div`\r\nmin-height: 60px!important;\r\n` as any;\r\n\r\nconst Label = styled.label`\r\nfont-size: medium!important;\r\ntext-align: left!important;\r\n` as any;\r\n\r\nconst Input = styled.input`\r\nfont-size: medium!important;\r\ntext-align: left!important;\r\n` as any;\r\n\r\nconst InputContainer = styled.div`\r\ntext-align: left!important;\r\n`;\r\n\r\nexport default function ShipmentTrackingEditor(props: IProps): ReactElement<{}> {\r\n  const [skipTracking, setSkipTracking] = useState<boolean>(false);\r\n  const [carrier, setCarrier] = useState<string>(get(props, 'config.tracking.tracking.carrier', ''));\r\n  const [carrierChanged, setCarrierChanged] = useState<boolean>(!!get(props, 'config.tracking.tracking.carrier', false));\r\n  const [code, setCode] = useState<string>(get(props, 'config.tracking.tracking.code', ''));\r\n  const [codeChanged, setCodeChanged] = useState<boolean>(!!get(props, 'config.tracking.tracking.code', ''));\r\n  const [url, setUrl] = useState<string>(get(props, 'config.tracking.tracking.url', ''));\r\n  const { translations, edited } = props;\r\n  function _getCarrierInvalid(): boolean {\r\n    return !skipTracking && isEmpty(carrier.replace(/\\s+/, '')) && carrierChanged;\r\n  }\r\n\r\n  function _getCodeInvalid(): boolean {\r\n    return !skipTracking && isEmpty(code.replace(/\\s+/, '')) && codeChanged;\r\n  }\r\n\r\n  function _updateSkipTracking(skipTracking: boolean): void {\r\n    setSkipTracking(skipTracking);\r\n    edited(skipTracking ? null : {\r\n      carrier,\r\n      code,\r\n      url,\r\n    });\r\n  }\r\n\r\n  function _updateCarrier(carrier: string): void {\r\n    setCarrier(carrier);\r\n    setCarrierChanged(true);\r\n\r\n    edited({\r\n      carrier,\r\n      code,\r\n      url,\r\n    });\r\n  }\r\n\r\n  function _updateCode(code: string): void {\r\n    setCode(code);\r\n    setCodeChanged(true);\r\n    edited({\r\n      carrier,\r\n      code,\r\n      url,\r\n    });\r\n  }\r\n\r\n  function _updateUrl(url: string): void {\r\n    setUrl(url);\r\n    edited({ carrier, code, url });\r\n  }\r\n\r\n  useEffect(() => {\r\n    const { edited } = props;\r\n\r\n    if (carrierChanged) {\r\n      edited(skipTracking ? null : {\r\n        carrier: carrier,\r\n        code: code,\r\n        url: url,\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div style={{ textAlign: 'left' }}>\r\n      <Label htmlFor=\"skipTracking\">\r\n        <Input\r\n          id=\"skipTracking\"\r\n          name=\"skipTracking\"\r\n          type=\"checkbox\"\r\n          checked={skipTracking}\r\n          onChange={({ target: { checked: skipTracking } }: any) => _updateSkipTracking(skipTracking)}\r\n        />\r\n        <span>&nbsp;{translations.skipTrackingDetails}</span>\r\n      </Label>\r\n      <br/>\r\n      <br/>\r\n      <FormGroup>\r\n        <Label htmlFor=\"input-carrier\"><span>{translations.carrier} <sup>*</sup></span></Label>\r\n        <InputContainer>\r\n          <Input\r\n            type=\"text\"\r\n            placeholder={translations.egFedex}\r\n            className=\"l-form-control\"\r\n            name=\"carrier\"\r\n            id=\"input-carrier\"\r\n            disabled={skipTracking}\r\n            value={carrier}\r\n            onChange={({ target: { value: carrier } }: any) => _updateCarrier(carrier)}\r\n          />\r\n          <ErrorMessage show={_getCarrierInvalid()}>\r\n            {translations.thisInfoIsRequired}\r\n          </ErrorMessage>\r\n        </InputContainer>\r\n      </FormGroup>\r\n      <FormGroup>\r\n        <Label htmlFor=\"input-code\"><span>{translations.trackingCode} <sup>*</sup></span></Label>\r\n        <InputContainer>\r\n          <Input\r\n            type=\"text\"\r\n            name=\"code\"\r\n            id=\"input-code\"\r\n            value={code}\r\n            disabled={skipTracking}\r\n            onChange={({ target: { value: code } }: any) => _updateCode(code)}\r\n          />\r\n          <ErrorMessage show={_getCodeInvalid()}>\r\n            {translations.thisInfoIsRequired}\r\n          </ErrorMessage>\r\n        </InputContainer>\r\n      </FormGroup>\r\n      <FormGroup>\r\n        <Label htmlFor=\"input-url\"><span><span>{translations.url}</span> ({translations.optional})</span></Label>\r\n        <InputContainer>\r\n          <Input\r\n            type=\"text\"\r\n            className=\"l-form-control\"\r\n            placeholder=\"https://\"\r\n            name=\"url\"\r\n            id=\"input-url\"\r\n            value={url}\r\n            disabled={skipTracking}\r\n            onChange={({ target: { value: url } }: any) => _updateUrl(url)}\r\n          />\r\n        </InputContainer>\r\n      </FormGroup>\r\n    </div>\r\n  );\r\n}\r\n"],"sourceRoot":""}